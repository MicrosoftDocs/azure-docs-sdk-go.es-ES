---
title: Autenticación con el SDK de Azure para Go
description: Obtenga información sobre los métodos de autenticación disponibles en el SDK de Azure para Go y cómo utilizarlos.
services: azure
author: sptramer
ms.author: sttramer
ms.date: 04/03/2018
ms.topic: article
ms.service: azure
ms.devlang: go
manager: carmonm
ms.openlocfilehash: 39f9dc5a7cdf9ab84cfd9264446bacb31392ca80
ms.sourcegitcommit: 59d2b4c9d8da15fbbd15e36551093219fdaf256e
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 04/18/2018
---
# <a name="authentication-methods-in-the-azure-sdk-for-go"></a><span data-ttu-id="6aff6-103">Métodos de autenticación en el SDK de Azure para Go</span><span class="sxs-lookup"><span data-stu-id="6aff6-103">Authentication methods in the Azure SDK for Go</span></span>

<span data-ttu-id="6aff6-104">El SDK de Azure para Go ofrece una variedad de tipos de autenticación y métodos que puede usar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6aff6-104">The Azure SDK for Go offers a variety of authentication types and methods that your application can use.</span></span> <span data-ttu-id="6aff6-105">Los métodos de autenticación admitidos van de la extracción de información de variables de entorno a la autenticación interactiva basada en web.</span><span class="sxs-lookup"><span data-stu-id="6aff6-105">Supported authentication methods range from pulling information from environment variables to interactive web-based authentication.</span></span> <span data-ttu-id="6aff6-106">En este artículo se presentan los tipos de autenticación disponibles en el SDK y los métodos para utilizarlos.</span><span class="sxs-lookup"><span data-stu-id="6aff6-106">This article introduces you to the available types of authentication in the SDK, and the methods for using them.</span></span> <span data-ttu-id="6aff6-107">También aprenderá los procedimientos recomendados para seleccionar el tipo de autenticación adecuado para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6aff6-107">You'll also learn best practices for selecting which authentication type is right for your application.</span></span>

## <a name="available-authentication-types-and-methods"></a><span data-ttu-id="6aff6-108">Métodos y tipos de autenticación disponibles</span><span class="sxs-lookup"><span data-stu-id="6aff6-108">Available authentication types and methods</span></span>

<span data-ttu-id="6aff6-109">El SDK de Azure para Go ofrece varios tipos diferentes de autenticación, mediante el uso de diferentes conjuntos de credenciales.</span><span class="sxs-lookup"><span data-stu-id="6aff6-109">The Azure SDK for Go offers several different types of authentication, using different credentials sets.</span></span> <span data-ttu-id="6aff6-110">Cada uno de estos tipos de autenticación está disponible mediante diferentes métodos de autenticación, que explican cómo el SDK toma estas credenciales como entrada.</span><span class="sxs-lookup"><span data-stu-id="6aff6-110">Each of these authentication types are available through different authentication methods, which are how the SDK takes these credentials as input.</span></span> <span data-ttu-id="6aff6-111">En la siguiente tabla se describen los tipos de autenticación disponibles y las situaciones en las que la aplicación recomienda utilizarlos.</span><span class="sxs-lookup"><span data-stu-id="6aff6-111">The following table describes the available types of authentication and situations in which they're recommended for use by your application.</span></span>

| <span data-ttu-id="6aff6-112">Tipo de autenticación</span><span class="sxs-lookup"><span data-stu-id="6aff6-112">Authentication type</span></span> | <span data-ttu-id="6aff6-113">Recomendado si...</span><span class="sxs-lookup"><span data-stu-id="6aff6-113">Recommended when...</span></span> |
|---------------------|---------------------|
| <span data-ttu-id="6aff6-114">Autenticación basada en certificados</span><span class="sxs-lookup"><span data-stu-id="6aff6-114">Certificate-based authentication</span></span> | <span data-ttu-id="6aff6-115">Tiene un certificado X509 configurado para un usuario o entidad de servicio de Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="6aff6-115">You have an X509 certificate that was configured for an Azure Active Directory (AAD) user or service principal.</span></span> <span data-ttu-id="6aff6-116">Para más información, consulte [Introducción a la autenticación basada en certificados de Azure Active Directory].</span><span class="sxs-lookup"><span data-stu-id="6aff6-116">To learn more, see [Get started with certificate-based authentication in Azure Active Directory].</span></span> |
| <span data-ttu-id="6aff6-117">Credenciales de cliente</span><span class="sxs-lookup"><span data-stu-id="6aff6-117">Client credentials</span></span> | <span data-ttu-id="6aff6-118">Tiene una entidad de servicio configurada que está preparada para esta aplicación o una clase de aplicaciones a las que pertenece.</span><span class="sxs-lookup"><span data-stu-id="6aff6-118">You have a configured service principal that is set up for this application or a class of applications it belongs to.</span></span> <span data-ttu-id="6aff6-119">Para más información, consulte [Creación de una entidad de servicio con la CLI de Azure 2.0].</span><span class="sxs-lookup"><span data-stu-id="6aff6-119">To learn more, see [Create a service principal with Azure CLI 2.0].</span></span> |
| <span data-ttu-id="6aff6-120">Managed Service Identity (MSI)</span><span class="sxs-lookup"><span data-stu-id="6aff6-120">Managed Service Identity (MSI)</span></span> | <span data-ttu-id="6aff6-121">La aplicación se ejecuta en un recurso de Azure que se ha configurado con Managed Service Identity (MSI).</span><span class="sxs-lookup"><span data-stu-id="6aff6-121">Your application is running on an Azure resource that has been configured with Managed Service Identity (MSI).</span></span> <span data-ttu-id="6aff6-122">Para más información, consulte [Managed Service Identity (MSI) para recursos de Azure].</span><span class="sxs-lookup"><span data-stu-id="6aff6-122">To learn more, see [Managed Service Identity (MSI) for Azure resources].</span></span> |
| <span data-ttu-id="6aff6-123">Token del dispositivo</span><span class="sxs-lookup"><span data-stu-id="6aff6-123">Device token</span></span> | <span data-ttu-id="6aff6-124">La aplicación está diseñada para utilizarse __solo__ de manera interactiva y tendrá una variedad de usuarios, potencialmente de varios inquilinos de AAD.</span><span class="sxs-lookup"><span data-stu-id="6aff6-124">Your application is meant to be used interactively __only__ and will have a variety of users, potentially from multiple AAD tenants.</span></span> <span data-ttu-id="6aff6-125">Los usuarios tienen acceso a un explorador web para iniciar sesión.</span><span class="sxs-lookup"><span data-stu-id="6aff6-125">Users have access to a web browser to log in.</span></span> <span data-ttu-id="6aff6-126">Para más información, consulte [Use device token authentication](#use-device-token-authentication) (Uso de la autenticación por tokens del dispositivo).</span><span class="sxs-lookup"><span data-stu-id="6aff6-126">For more information, see [Use device token authentication](#use-device-token-authentication).</span></span>|
| <span data-ttu-id="6aff6-127">Nombre de usuario/contraseña</span><span class="sxs-lookup"><span data-stu-id="6aff6-127">Username/password</span></span> | <span data-ttu-id="6aff6-128">Tiene una aplicación interactiva que no puede utilizar ningún otro método de autenticación.</span><span class="sxs-lookup"><span data-stu-id="6aff6-128">You have an interactive application that cannot use any other authentication method.</span></span> <span data-ttu-id="6aff6-129">Los usuarios no tienen habilitada la autenticación multifactor para su inicio de sesión de AAD.</span><span class="sxs-lookup"><span data-stu-id="6aff6-129">Your users do not have multi-factor authentication enabled for their AAD login.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="6aff6-130">Si usa un tipo de autenticación diferente a las credenciales de cliente, la aplicación debe estar registrada en Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="6aff6-130">If you use an authentication type other than client credentials, your application must be registered in Azure Active Directory.</span></span> <span data-ttu-id="6aff6-131">Para más información, consulte [Integración de aplicaciones con Azure Active Directory](/azure/active-directory/develop/active-directory-integrating-applications).</span><span class="sxs-lookup"><span data-stu-id="6aff6-131">To learn how, see [Integrating applications with Azure Active Directory](/azure/active-directory/develop/active-directory-integrating-applications).</span></span>

> [!NOTE]
> <span data-ttu-id="6aff6-132">A menos que tenga requisitos especiales, evite la autenticación por nombre de usuario o contraseña.</span><span class="sxs-lookup"><span data-stu-id="6aff6-132">Unless you have special requirements, avoid username/password authentication.</span></span> <span data-ttu-id="6aff6-133">En situaciones en las que el inicio de sesión basado en usuario es apropiado, normalmente se puede utilizar la autenticación por tokens del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="6aff6-133">In situations where user-based login is appropriate, device token authentication can usually be used instead.</span></span>

[Introducción a la autenticación basada en certificados de Azure Active Directory]: /azure/active-directory/active-directory-certificate-based-authentication-get-started
[Get started with certificate-based authentication in Azure Active Directory]: /azure/active-directory/active-directory-certificate-based-authentication-get-started
[Creación de una entidad de servicio con la CLI de Azure 2.0]: /cli/azure/create-an-azure-service-principal-azure-cli
[Create a service principal with Azure CLI 2.0]: /cli/azure/create-an-azure-service-principal-azure-cli
[Managed Service Identity (MSI) para recursos de Azure]: /azure/active-directory/managed-service-identity/overview
[Managed Service Identity (MSI) for Azure resources]: /azure/active-directory/managed-service-identity/overview

<span data-ttu-id="6aff6-137">Estos tipos de autenticación están disponibles a través de diferentes métodos.</span><span class="sxs-lookup"><span data-stu-id="6aff6-137">These authentication types are available through different methods.</span></span> <span data-ttu-id="6aff6-138">[_La autenticación basada en entornos_](#use-environment-based-authentication) lee las credenciales directamente desde el entorno del programa.</span><span class="sxs-lookup"><span data-stu-id="6aff6-138">[_Environment-based authentication_](#use-environment-based-authentication) reads credentials directly from the program's environment.</span></span> <span data-ttu-id="6aff6-139">[_La autenticación basada en archivos_ ](#use-file-based-authentication) carga un archivo que contiene las credenciales de la entidad de servicio.</span><span class="sxs-lookup"><span data-stu-id="6aff6-139">[_File-based authentication_](#use-file-based-authentication) loads a file containing service principal credentials.</span></span> <span data-ttu-id="6aff6-140">[_La autenticación basada en cliente_](#use-an-authentication-client) utiliza un objeto en el código Go y le hace responsable de proporcionar las credenciales durante la ejecución del programa.</span><span class="sxs-lookup"><span data-stu-id="6aff6-140">[_Client-based authentication_](#use-an-authentication-client) uses an object in Go code and makes you responsible for providing the credentials during program execution.</span></span> <span data-ttu-id="6aff6-141">Por último, [_la autenticación por tokens del dispositivo_](#use-device-token-authentication) requiere que los usuarios inicien sesión de forma interactiva mediante un navegador web con un token, y no puede utilizarse con autenticación basada en entornos o en archivos.</span><span class="sxs-lookup"><span data-stu-id="6aff6-141">Finally, [_Device token authentication_](#use-device-token-authentication) requires users to log in interactively through a web browser with a token, and cannot be used with environment- or file-based authentication.</span></span>

<span data-ttu-id="6aff6-142">Todas las funciones y tipos de autenticación están disponibles en el paquete `github.com/Azure/go-autorest/autorest/azure/auth`.</span><span class="sxs-lookup"><span data-stu-id="6aff6-142">All authentication functions and types are available in the `github.com/Azure/go-autorest/autorest/azure/auth` package.</span></span>

> [!NOTE]
> <span data-ttu-id="6aff6-143">A menos que tenga requisitos especiales, evite la autenticación basada en cliente.</span><span class="sxs-lookup"><span data-stu-id="6aff6-143">Unless you have special requirements, avoid client-based authentication.</span></span> <span data-ttu-id="6aff6-144">Este método de autenticación fomenta las malas prácticas.</span><span class="sxs-lookup"><span data-stu-id="6aff6-144">This method of authentication encourages bad practices.</span></span> <span data-ttu-id="6aff6-145">En particular, el uso de la autenticación basada en cliente hace que sea tentador codificar de forma rígida las credenciales.</span><span class="sxs-lookup"><span data-stu-id="6aff6-145">In particular, using client-based authentication makes it tempting to hard-code credentials.</span></span> <span data-ttu-id="6aff6-146">La escritura de código personalizado para la autenticación también puede interrumpirse en futuras versiones del SDK si cambian los requisitos de autenticación.</span><span class="sxs-lookup"><span data-stu-id="6aff6-146">Writing custom code for authentication may also break under future SDK releases if authentication requirements change.</span></span>

## <a name="use-environment-based-authentication"></a><span data-ttu-id="6aff6-147">Uso de la autenticación basada en entornos</span><span class="sxs-lookup"><span data-stu-id="6aff6-147">Use environment-based authentication</span></span>

<span data-ttu-id="6aff6-148">Si ejecuta la aplicación en un entorno rígidamente controlado, como en un contenedor, la autenticación basada en entornos es una opción natural.</span><span class="sxs-lookup"><span data-stu-id="6aff6-148">If you're running your application in a tightly controlled environment such as in a container, environment-based authentication is a natural choice.</span></span> <span data-ttu-id="6aff6-149">Va a configurar el entorno shell antes de ejecutar la aplicación y el SDK de Go lee estas variables de entorno en tiempo de ejecución para autenticarse con Azure.</span><span class="sxs-lookup"><span data-stu-id="6aff6-149">You configure the shell environment before running your application and the Go SDK reads these environment variables at runtime to authenticate with Azure.</span></span> 

<span data-ttu-id="6aff6-150">La autenticación basada en entornos es compatible con todos los métodos de autenticación excepto con los tokens de dispositivo, que se evalúan en el siguiente orden: credenciales de cliente, certificados, nombre de usuario/contraseña y Managed Service Identity (MSI).</span><span class="sxs-lookup"><span data-stu-id="6aff6-150">Environment-based authentication has support for all authentication methods except device tokens, evaluated in the following order: Client credentials, certificates, username/password, and Managed Service Identity (MSI).</span></span> <span data-ttu-id="6aff6-151">Si una variable de entorno necesaria no está configurada o el SDK recibe un rechazo del servicio de autenticación, se prueba el siguiente tipo de autenticación.</span><span class="sxs-lookup"><span data-stu-id="6aff6-151">If a required environment variable is unset or the SDK gets a refusal from the authentication service, the next authentication type is tried.</span></span> <span data-ttu-id="6aff6-152">Si el SDK no puede autenticarse desde el entorno, devuelve un error.</span><span class="sxs-lookup"><span data-stu-id="6aff6-152">If the SDK cannot authenticate from the environment, it returns an error.</span></span>

<span data-ttu-id="6aff6-153">En la tabla siguiente se detallan las variables de entorno que deben configurarse para cada tipo de autenticación admitida por la autenticación basada en entornos.</span><span class="sxs-lookup"><span data-stu-id="6aff6-153">The following table details the environment variables that need to be set for each authentication type supported by environment-based authentication.</span></span>

| <span data-ttu-id="6aff6-154">Tipo de autenticación</span><span class="sxs-lookup"><span data-stu-id="6aff6-154">Authentication type</span></span> | <span data-ttu-id="6aff6-155">Variable de entorno</span><span class="sxs-lookup"><span data-stu-id="6aff6-155">Environment variable</span></span> | <span data-ttu-id="6aff6-156">DESCRIPCIÓN</span><span class="sxs-lookup"><span data-stu-id="6aff6-156">Description</span></span> |
| ------------------- | -------------------- | ----------- |
| <span data-ttu-id="6aff6-157">__Credenciales de cliente__</span><span class="sxs-lookup"><span data-stu-id="6aff6-157">__Client credentials__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="6aff6-158">El identificador del inquilino de Active Directory al que pertenece la entidad de servicio.</span><span class="sxs-lookup"><span data-stu-id="6aff6-158">The ID for the Active Directory tenant that the service principal belongs to.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="6aff6-159">El nombre o identificador de la entidad de servicio.</span><span class="sxs-lookup"><span data-stu-id="6aff6-159">The name or ID of the service principal.</span></span> |
| | `AZURE_CLIENT_SECRET` | <span data-ttu-id="6aff6-160">Secreto asociado a la entidad de servicio.</span><span class="sxs-lookup"><span data-stu-id="6aff6-160">The secret associated with the service principal.</span></span> |
| <span data-ttu-id="6aff6-161">__Certificate__</span><span class="sxs-lookup"><span data-stu-id="6aff6-161">__Certificate__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="6aff6-162">El identificador del inquilino de Active Directory con el que está registrado el certificado.</span><span class="sxs-lookup"><span data-stu-id="6aff6-162">The ID for the Active Directory tenant that the certificate is registered with.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="6aff6-163">El identificador del cliente de aplicación asociado al certificado.</span><span class="sxs-lookup"><span data-stu-id="6aff6-163">The application client ID associated with the certificate.</span></span> |
| | `AZURE_CERTIFICATE_PATH` | <span data-ttu-id="6aff6-164">La ruta de acceso a un archivo de certificado de cliente.</span><span class="sxs-lookup"><span data-stu-id="6aff6-164">The path to the client certificate file.</span></span> |
| | `AZURE_CERTIFICATE_PASSWORD` | <span data-ttu-id="6aff6-165">La contraseña para el certificado de cliente.</span><span class="sxs-lookup"><span data-stu-id="6aff6-165">The password for the client certificate.</span></span> |
| <span data-ttu-id="6aff6-166">__Nombre de usuario/contraseña__</span><span class="sxs-lookup"><span data-stu-id="6aff6-166">__Username/Password__</span></span> | `AZURE_TENANT_ID` | <span data-ttu-id="6aff6-167">El identificador del inquilino de Active Directory al que pertenece el usuario.</span><span class="sxs-lookup"><span data-stu-id="6aff6-167">The ID for the Active Directory tenant that the user belongs to.</span></span> |
| | `AZURE_CLIENT_ID` | <span data-ttu-id="6aff6-168">El identificador del cliente de aplicación.</span><span class="sxs-lookup"><span data-stu-id="6aff6-168">The application client ID.</span></span> |
| | `AZURE_USERNAME` | <span data-ttu-id="6aff6-169">El nombre de usuario con el que se va a iniciar sesión.</span><span class="sxs-lookup"><span data-stu-id="6aff6-169">The username to log in with.</span></span> |
| | `AZURE_PASSWORD` | <span data-ttu-id="6aff6-170">La contraseña con la que se va a iniciar sesión.</span><span class="sxs-lookup"><span data-stu-id="6aff6-170">The password to log in with.</span></span> |
| <span data-ttu-id="6aff6-171">__MSI__</span><span class="sxs-lookup"><span data-stu-id="6aff6-171">__MSI__</span></span> | | <span data-ttu-id="6aff6-172">MSI no requiere el establecimiento de ninguna credencial.</span><span class="sxs-lookup"><span data-stu-id="6aff6-172">MSI does not require any credentials to be set.</span></span> <span data-ttu-id="6aff6-173">La aplicación debe ejecutarse en un recurso de Azure configurado para usar la identidad de servicio administrada.</span><span class="sxs-lookup"><span data-stu-id="6aff6-173">The application must be running on an Azure resource configured to use MSI.</span></span> <span data-ttu-id="6aff6-174">Para más información, consulte [Managed Service Identity (MSI) para recursos de Azure].</span><span class="sxs-lookup"><span data-stu-id="6aff6-174">For details, see [Managed Service Identity (MSI) for Azure resources].</span></span> |

<span data-ttu-id="6aff6-175">Si necesita conectarse a una nube o a un punto de conexión de administración distinto de la nube pública Azure predeterminada, también puede establecer las siguientes variables de entorno.</span><span class="sxs-lookup"><span data-stu-id="6aff6-175">If you need to connect to a cloud or management endpoint other than the default Azure public cloud, you can also set the following environment variables.</span></span> <span data-ttu-id="6aff6-176">Las razones más comunes para establecerlas son si se usa Azure Stack, una nube en una región geográfica diferente o el modelo de implementación clásico de Azure.</span><span class="sxs-lookup"><span data-stu-id="6aff6-176">The most common reasons to set them are if you use Azure Stack, a cloud in a different geographic region, or the Azure Classic deployment model.</span></span>

| <span data-ttu-id="6aff6-177">Variable de entorno</span><span class="sxs-lookup"><span data-stu-id="6aff6-177">Environment variable</span></span> | <span data-ttu-id="6aff6-178">DESCRIPCIÓN</span><span class="sxs-lookup"><span data-stu-id="6aff6-178">Description</span></span>  |
|----------------------|--------------|
| `AZURE_ENVIRONMENT` | <span data-ttu-id="6aff6-179">El nombre del entorno de nube al que se conectará.</span><span class="sxs-lookup"><span data-stu-id="6aff6-179">The name of the cloud environment to connect to.</span></span> |
| `AZURE_AD_RESOURCE` | <span data-ttu-id="6aff6-180">El identificador de recurso de Active Directory que se utilizará al conectarse.</span><span class="sxs-lookup"><span data-stu-id="6aff6-180">The Active Directory resource ID to use when connecting.</span></span> <span data-ttu-id="6aff6-181">Debe ser un URI que señala al punto de conexión de administración.</span><span class="sxs-lookup"><span data-stu-id="6aff6-181">This should be a URI pointing to your management endpoint.</span></span> |

<span data-ttu-id="6aff6-182">Cuando se usa la autenticación basada en entornos, llame a la función [NewAuthorizerFromEnvironment](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromEnvironment) para obtener el objeto autorizador.</span><span class="sxs-lookup"><span data-stu-id="6aff6-182">When using environment-based authentication, call the [NewAuthorizerFromEnvironment](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromEnvironment) function to get your authorizer object.</span></span> <span data-ttu-id="6aff6-183">Este objeto se establece entonces en la propiedad `Authorizer` de los clientes para permitirles el acceso a Azure.</span><span class="sxs-lookup"><span data-stu-id="6aff6-183">This object is then set on the `Authorizer` property of clients to allow them access to Azure.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
authorizer, err := auth.NewAuthorizerFromEnvironment()
```

## <a name="use-file-based-authentication"></a><span data-ttu-id="6aff6-184">Uso de la autenticación basada en archivos</span><span class="sxs-lookup"><span data-stu-id="6aff6-184">Use file-based authentication</span></span>

<span data-ttu-id="6aff6-185">La autenticación basada en archivos solo funciona con las credenciales del cliente cuando se almacenan en un formato de archivo local generado por [la CLI de Azure 2.0](/cli/azure).</span><span class="sxs-lookup"><span data-stu-id="6aff6-185">File-based authentication only works with client credentials when they are stored in a local file format generated by [the Azure CLI 2.0](/cli/azure).</span></span> <span data-ttu-id="6aff6-186">Puede crear fácilmente este archivo cuando se crea una nueva entidad de servicio con el parámetro `--sdk-auth`.</span><span class="sxs-lookup"><span data-stu-id="6aff6-186">You can easily create this file when creating a new service principal with the `--sdk-auth` parameter.</span></span> <span data-ttu-id="6aff6-187">Si planea utilizar la autenticación basada en archivos, asegúrese de que se proporciona este argumento al crear una entidad de servicio.</span><span class="sxs-lookup"><span data-stu-id="6aff6-187">If you plan on using file-based authentication, make sure that this argument is provided when creating a service principal.</span></span> <span data-ttu-id="6aff6-188">Como la CLI imprime la salida en `stdout`, redirija la salida a un archivo.</span><span class="sxs-lookup"><span data-stu-id="6aff6-188">Since the CLI prints output to `stdout`, redirect output to a file.</span></span>

```azurecli
az ad sp create-for-rbac --sdk-auth > azure.auth
```

<span data-ttu-id="6aff6-189">Establezca la variable de entorno `AZURE_AUTH_LOCATION` en donde se encuentra el archivo de autorización.</span><span class="sxs-lookup"><span data-stu-id="6aff6-189">Set the `AZURE_AUTH_LOCATION` environment variable to where the authorization file is located.</span></span> <span data-ttu-id="6aff6-190">La aplicación lee esta variable de entorno y analiza las credenciales que contiene.</span><span class="sxs-lookup"><span data-stu-id="6aff6-190">This environment variable is read by the application, and the credentials within it are parsed.</span></span> <span data-ttu-id="6aff6-191">Si tiene que seleccionar el archivo de autorización en tiempo de ejecución, manipule el entorno del programa mediante la función [os.Setenv](https://golang.org/pkg/os/#Setenv).</span><span class="sxs-lookup"><span data-stu-id="6aff6-191">If you need to select the authorization file at runtime, manipulate the program's environment using the [os.Setenv](https://golang.org/pkg/os/#Setenv) function.</span></span>

<span data-ttu-id="6aff6-192">Para cargar la información de autenticación, llame a la función [NewAuthorizerFromFile](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromFile).</span><span class="sxs-lookup"><span data-stu-id="6aff6-192">To load the authentication information, call the [NewAuthorizerFromFile](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewAuthorizerFromFile) function.</span></span> <span data-ttu-id="6aff6-193">A diferencia de la autorización basada en entornos, la autorización basada en archivos requiere un punto de conexión de recursos.</span><span class="sxs-lookup"><span data-stu-id="6aff6-193">Unlike environment-based authorization, file-based authorization requires a resource endpoint.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
authorizer, err := NewAuthorizerFromFile(azure.PublicCloud.ResourceManagerEndpoint)
```

<span data-ttu-id="6aff6-194">Para más información acerca del uso de entidades de servicio y la administración de los permisos de acceso, consulte [Creación de una entidad de servicio con la CLI de Azure 2.0].</span><span class="sxs-lookup"><span data-stu-id="6aff6-194">For more on using service principals and managing their access permissions, see [Create a service principal with Azure CLI 2.0].</span></span>

## <a name="use-device-token-authentication"></a><span data-ttu-id="6aff6-195">Uso de la autenticación por tokens del dispositivo</span><span class="sxs-lookup"><span data-stu-id="6aff6-195">Use device token authentication</span></span>

<span data-ttu-id="6aff6-196">Si desea que los usuarios inicien sesión de forma interactiva, la mejor manera de ofrecer esa funcionalidad es mediante la autenticación por tokens del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="6aff6-196">If you want users to log in interactively, the best way to offer that capability is through device token authentication.</span></span> <span data-ttu-id="6aff6-197">Este flujo de autenticación pasa al usuario un token para pegarlo en un sitio de inicio de sesión de Microsoft, donde luego inicia sesión con una cuenta de Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="6aff6-197">This authentication flow passes the user a token to paste into a Microsoft login site, where they then log in with an Azure Active Directory (AAD) account.</span></span> <span data-ttu-id="6aff6-198">Este método de autenticación admite cuentas que tienen habilitada la autenticación multifactor, a diferencia de la autenticación estándar de nombre de usuario y contraseña.</span><span class="sxs-lookup"><span data-stu-id="6aff6-198">This authentication method supports accounts that have multi-factor authentication enabled, unlike standard username/password authentication.</span></span>

<span data-ttu-id="6aff6-199">Para usar la autenticación por tokens del dispositivo, cree un autorizador de [DeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig) con la función [NewDeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewDeviceFlowConfig).</span><span class="sxs-lookup"><span data-stu-id="6aff6-199">To use device token authentication, create a [DeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig) authorizer with the [NewDeviceFlowConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#NewDeviceFlowConfig) function.</span></span> <span data-ttu-id="6aff6-200">Llame al [autorizador](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig.Authorizer) en el objeto resultante para iniciar el proceso de autenticación.</span><span class="sxs-lookup"><span data-stu-id="6aff6-200">Call [Authorizer](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig.Authorizer) on the resulting object to start the authentication process.</span></span> <span data-ttu-id="6aff6-201">La autenticación por flujo de dispositivo bloquea la ejecución del programa hasta que se complete todo el flujo de autenticación.</span><span class="sxs-lookup"><span data-stu-id="6aff6-201">Device flow authentication blocks program execution until the whole authentication flow is complete.</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
deviceConfig := auth.NewDeviceFlowConfig(applicationID, tenantID)
authorizer, err := deviceConfig.Authorizer()
```

## <a name="use-an-authentication-client"></a><span data-ttu-id="6aff6-202">Uso de un cliente de autenticación</span><span class="sxs-lookup"><span data-stu-id="6aff6-202">Use an authentication client</span></span>

<span data-ttu-id="6aff6-203">Si necesita un tipo específico de autenticación y está dispuesto a que el programa haga el trabajo de cargar la información de autenticación del usuario, puede utilizar cualquier cliente que se ajuste a la interfaz [auth.AuthorizerConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#AuthorizerConfig).</span><span class="sxs-lookup"><span data-stu-id="6aff6-203">If you require a specific type of authentication and are willing to have your program do the work to load authentication information from the user, you can use any client that conforms to the [auth.AuthorizerConfig](https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#AuthorizerConfig) interface.</span></span> <span data-ttu-id="6aff6-204">Utilice un tipo que implemente esta interfaz cuando desee un programa interactivo, use archivos de configuración especializados o tenga un requisito que le impida utilizar otro método de autenticación.</span><span class="sxs-lookup"><span data-stu-id="6aff6-204">Use a type that implements this interface when you want an interactive program, use specialized configuration files, or have a requirement that prevents you from using another authentication method.</span></span>

> [!WARNING]
> <span data-ttu-id="6aff6-205">Nunca codifique de forma rígida las credenciales de Azure en una aplicación.</span><span class="sxs-lookup"><span data-stu-id="6aff6-205">Never hard-code Azure credentials into an application.</span></span> <span data-ttu-id="6aff6-206">Poner secretos en un archivo binario de una aplicación hace más fácil su extracción por parte de un atacante, ya se esté ejecutando la aplicación o no.</span><span class="sxs-lookup"><span data-stu-id="6aff6-206">Putting secrets into an application binary makes it easier for an attacker to extract them, whether the application is running or not.</span></span> <span data-ttu-id="6aff6-207">Esto pone en riesgo todos los recursos de los Azure cuyas credenciales están autorizadas.</span><span class="sxs-lookup"><span data-stu-id="6aff6-207">This puts all Azure resources the credentials are authorized for at risk!</span></span>

<span data-ttu-id="6aff6-208">En la tabla siguiente se enumeran los tipos en el SDK que se ajustan a la interfaz `AuthorizerConfig`.</span><span class="sxs-lookup"><span data-stu-id="6aff6-208">The following table lists the types in the SDK that conform to the `AuthorizerConfig` interface.</span></span>

| <span data-ttu-id="6aff6-209">Tipo de autenticación</span><span class="sxs-lookup"><span data-stu-id="6aff6-209">Authentication type</span></span> | <span data-ttu-id="6aff6-210">Tipo de autorizador</span><span class="sxs-lookup"><span data-stu-id="6aff6-210">Authorizer type</span></span> |
|---------------------|-----------------------|
| <span data-ttu-id="6aff6-211">Autenticación basada en certificados</span><span class="sxs-lookup"><span data-stu-id="6aff6-211">Certificate-based authentication</span></span> | <span data-ttu-id="6aff6-212">[ClientCertificateConfig]</span><span class="sxs-lookup"><span data-stu-id="6aff6-212">[ClientCertificateConfig]</span></span> |
| <span data-ttu-id="6aff6-213">Credenciales de cliente</span><span class="sxs-lookup"><span data-stu-id="6aff6-213">Client credentials</span></span> | <span data-ttu-id="6aff6-214">[ClientCredentialsConfig]</span><span class="sxs-lookup"><span data-stu-id="6aff6-214">[ClientCredentialsConfig]</span></span> |
| <span data-ttu-id="6aff6-215">Managed Service Identity (MSI)</span><span class="sxs-lookup"><span data-stu-id="6aff6-215">Managed Service Identity (MSI)</span></span> | <span data-ttu-id="6aff6-216">[MSIConfig]</span><span class="sxs-lookup"><span data-stu-id="6aff6-216">[MSIConfig]</span></span> |
| <span data-ttu-id="6aff6-217">Nombre de usuario/contraseña</span><span class="sxs-lookup"><span data-stu-id="6aff6-217">Username/password</span></span> | <span data-ttu-id="6aff6-218">[UsernamePasswordConfig]</span><span class="sxs-lookup"><span data-stu-id="6aff6-218">[UsernamePasswordConfig]</span></span> |

[ClientCertificateConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#ClientCertificateConfig
[ClientCredentialsConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#ClientCredentialsConfig
[MSIConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#MSIConfig
[DeviceFlowConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#DeviceFlowConfig
[UsernamePasswordConfig]: https://godoc.org/github.com/Azure/go-autorest/autorest/azure/auth#UsernamePasswordConfig

<span data-ttu-id="6aff6-223">Cree un autenticador con su función `New` asociada y, después, llame a `Authorize` en el objeto resultante para realizar la autenticación.</span><span class="sxs-lookup"><span data-stu-id="6aff6-223">Create an authenticator with its associated `New` function, and then call `Authorize` on the resulting object to perform authentication.</span></span> <span data-ttu-id="6aff6-224">Por ejemplo, para usar la autenticación basada en certificado:</span><span class="sxs-lookup"><span data-stu-id="6aff6-224">For example, to use certificate-based authentication:</span></span>

```go
import "github.com/Azure/go-autorest/autorest/azure/auth"
certificateAuthorizer := auth.NewClientCertificateConfig(certificatePath, certificatePassword, clientID, tenantID)
authorizerToken, err := certificateAuthorizer.Authorize()
```
